# ğŸŒ¾ METGO 3D - Makefile
# Sistema MeteorolÃ³gico AgrÃ­cola Quillota - VersiÃ³n Operativa 2.0

.PHONY: help install test clean run backup monitor deploy

# Variables
PYTHON = python3
PIP = pip3
VENV = venv
REQUIREMENTS = requirements.txt

# Ayuda
help:
	@echo "ğŸŒ¾ METGO 3D - Sistema MeteorolÃ³gico AgrÃ­cola Quillota"
	@echo "=================================================="
	@echo "Comandos disponibles:"
	@echo "  install    - Instalar dependencias del sistema"
	@echo "  test       - Ejecutar tests del sistema"
	@echo "  run        - Ejecutar sistema completo"
	@echo "  run-fast   - Ejecutar sistema en modo rÃ¡pido"
	@echo "  clean      - Limpiar archivos temporales"
	@echo "  backup     - Crear backup del sistema"
	@echo "  monitor    - Monitorear estado del sistema"
	@echo "  deploy     - Desplegar sistema en producciÃ³n"
	@echo "  docker     - Construir imagen Docker"
	@echo "  docker-run - Ejecutar contenedor Docker"

# Instalar dependencias
install:
	@echo "ğŸ“¦ Instalando dependencias del sistema METGO 3D..."
	$(PIP) install -r $(REQUIREMENTS)
	@echo "âœ… Dependencias instaladas correctamente"

# Ejecutar tests
test:
	@echo "ğŸ§ª Ejecutando tests del sistema METGO 3D..."
	$(PYTHON) test_sistema.py
	@echo "âœ… Tests completados"

# Ejecutar sistema completo
run:
	@echo "ğŸš€ Ejecutando sistema METGO 3D completo..."
	$(PYTHON) ejecutar_sistema_completo.py completo
	@echo "âœ… Sistema ejecutado correctamente"

# Ejecutar sistema en modo rÃ¡pido
run-fast:
	@echo "âš¡ Ejecutando sistema METGO 3D en modo rÃ¡pido..."
	$(PYTHON) ejecutar_sistema_completo.py rapido
	@echo "âœ… Sistema ejecutado en modo rÃ¡pido"

# Limpiar archivos temporales
clean:
	@echo "ğŸ§¹ Limpiando archivos temporales..."
	$(PYTHON) limpiar_sistema.py
	@echo "âœ… Limpieza completada"

# Crear backup del sistema
backup:
	@echo "ğŸ’¾ Creando backup del sistema METGO 3D..."
	$(PYTHON) backup_sistema.py
	@echo "âœ… Backup creado correctamente"

# Monitorear estado del sistema
monitor:
	@echo "ğŸ“Š Monitoreando estado del sistema METGO 3D..."
	$(PYTHON) monitor_sistema.py
	@echo "âœ… Monitoreo completado"

# Desplegar sistema en producciÃ³n
deploy:
	@echo "ğŸš€ Desplegando sistema METGO 3D en producciÃ³n..."
	$(PYTHON) ejecutar_sistema_completo.py deployment
	@echo "âœ… Sistema desplegado en producciÃ³n"

# Construir imagen Docker
docker:
	@echo "ğŸ³ Construyendo imagen Docker de METGO 3D..."
	docker build -t metgo-3d:latest .
	@echo "âœ… Imagen Docker construida"

# Ejecutar contenedor Docker
docker-run:
	@echo "ğŸ³ Ejecutando contenedor Docker de METGO 3D..."
	docker run -p 8501:8501 metgo-3d:latest
	@echo "âœ… Contenedor Docker ejecutÃ¡ndose"

# Ejecutar con docker-compose
docker-compose:
	@echo "ğŸ³ Ejecutando con docker-compose..."
	docker-compose up -d
	@echo "âœ… Servicios ejecutÃ¡ndose con docker-compose"

# Detener servicios docker-compose
docker-stop:
	@echo "ğŸ³ Deteniendo servicios docker-compose..."
	docker-compose down
	@echo "âœ… Servicios detenidos"

# Instalar sistema completo
install-system:
	@echo "ğŸ”§ Instalando sistema METGO 3D completo..."
	$(PYTHON) instalar_sistema.py
	@echo "âœ… Sistema instalado correctamente"

# Ejecutar anÃ¡lisis meteorolÃ³gico
analyze:
	@echo "ğŸŒ¤ï¸ Ejecutando anÃ¡lisis meteorolÃ³gico..."
	$(PYTHON) ejecutar_sistema_completo.py analisis
	@echo "âœ… AnÃ¡lisis meteorolÃ³gico completado"

# Generar reportes
reports:
	@echo "ğŸ“‹ Generando reportes del sistema..."
	$(PYTHON) ejecutar_sistema_completo.py reportes
	@echo "âœ… Reportes generados correctamente"

# Verificar estado del sistema
status:
	@echo "ğŸ“Š Verificando estado del sistema METGO 3D..."
	$(PYTHON) monitor_sistema.py
	@echo "âœ… Estado del sistema verificado"

# Actualizar dependencias
update:
	@echo "ğŸ”„ Actualizando dependencias del sistema..."
	$(PIP) install --upgrade -r $(REQUIREMENTS)
	@echo "âœ… Dependencias actualizadas"

# Formatear cÃ³digo
format:
	@echo "ğŸ¨ Formateando cÃ³digo del sistema..."
	black .
	@echo "âœ… CÃ³digo formateado"

# Linting del cÃ³digo
lint:
	@echo "ğŸ” Ejecutando linting del cÃ³digo..."
	flake8 .
	@echo "âœ… Linting completado"

# Ejecutar todos los comandos de desarrollo
dev-setup: install test clean
	@echo "ğŸ”§ ConfiguraciÃ³n de desarrollo completada"

# Ejecutar todos los comandos de producciÃ³n
prod-setup: install test clean backup deploy
	@echo "ğŸš€ ConfiguraciÃ³n de producciÃ³n completada"
